(this["webpackJsonpcibertec-react"]=this["webpackJsonpcibertec-react"]||[]).push([[0],{14:function(e,t,a){e.exports=a.p+"static/media/loading.a1e184b8.svg"},32:function(e,t,a){e.exports=a(67)},39:function(e,t,a){},67:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(27),o=a.n(c),l=(a(37),a(5)),s=a(2),u=a.n(s),i=(a(39),a(9));function m(e){var t=e.texto?e.texto:"T\xedtulo no definido";return r.a.createElement("h1",null,t)}function d(e){var t=e.texto;return r.a.createElement("p",null,t)}function p(){return r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Nombre"),r.a.createElement("th",null,"Precio Unitario"),r.a.createElement("th",null)))}function f(e){return r.a.createElement("tr",{key:e.producto.productId},r.a.createElement("td",null,e.producto.productName),r.a.createElement("td",null,e.producto.unitPrice),r.a.createElement("td",null,r.a.createElement(i.a,{to:"/products/".concat(e.producto.productId)},"Detalle"),r.a.createElement("button",{className:"btn btn-link btn-sm",onClick:function(){e.onDeleteProduct(e.producto.productId)}},"Borrar")))}function b(e){return r.a.createElement("table",{className:"table table-bordered"},r.a.createElement(p,null),r.a.createElement("tbody",null,e.data.map((function(t){return r.a.createElement(f,{key:t.productId,producto:t,onDeleteProduct:e.onDeleteProducts})}))))}var E=a(8),v=a.n(E);function h(e,t){var a,n;return u.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return a={username:e,password:t},r.next=3,u.a.awrap(v.a.post("".concat("https://slncibertecapi20200213080059.azurewebsites.net","/account/token"),a,{headers:{"Content-Type":"application/json"}}));case 3:return n=r.sent,r.abrupt("return",n.data);case 5:case"end":return r.stop()}}))}function g(){var e,t;return u.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return e={refreshToken:localStorage.getItem("cibertec-refresh-token")},a.next=3,u.a.awrap(v.a.post("".concat("https://slncibertecapi20200213080059.azurewebsites.net","/account/token/refresh"),e,{headers:{"Content-Type":"application/json"}}));case 3:return t=a.sent,a.abrupt("return",t.data);case 5:case"end":return a.stop()}}))}function x(){var e,t,a,n;return u.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(e=localStorage.getItem("cibertec-token")){r.next=3;break}return r.abrupt("return",null);case 3:if(t=Number(localStorage.getItem("cibertec-token-expiration-ms")),!((new Date).getTime()<t)){r.next=6;break}return r.abrupt("return",e);case 6:return r.next=8,u.a.awrap(g());case 8:return(a=r.sent).accessToken&&(localStorage.setItem("cibertec-token",a.accessToken),localStorage.setItem("cibertec-refresh-token",a.refreshToken),n=(new Date).getTime()+1e3*a.expiresIn,localStorage.setItem("cibertec-token-expiration-ms",n.toString())),r.abrupt("return",localStorage.getItem("cibertec-token"));case 11:case"end":return r.stop()}}))}var w="https://slncibertecapi20200213080059.azurewebsites.net";function N(){var e;return u.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=u.a,t.t1=v.a,t.t2="".concat(w,"/products"),t.t3="Bearer ",t.next=6,u.a.awrap(x());case 6:return t.t4=t.sent,t.t5=t.t3.concat.call(t.t3,t.t4),t.t6={Authorization:t.t5},t.t7={headers:t.t6},t.t8=t.t1.get.call(t.t1,t.t2,t.t7),t.next=13,t.t0.awrap.call(t.t0,t.t8);case 13:return e=t.sent,t.abrupt("return",e.data);case 15:case"end":return t.stop()}}))}function k(e){var t;return u.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.t0=u.a,a.t1=v.a,a.t2="".concat(w,"/products/").concat(e),a.t3="Bearer ",a.next=6,u.a.awrap(x());case 6:return a.t4=a.sent,a.t5=a.t3.concat.call(a.t3,a.t4),a.t6={Authorization:a.t5},a.t7={headers:a.t6},a.t8=a.t1.get.call(a.t1,a.t2,a.t7),a.next=13,a.t0.awrap.call(a.t0,a.t8);case 13:return t=a.sent,a.abrupt("return",t.data);case 15:case"end":return a.stop()}}))}function y(e){var t;return u.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.t0=u.a,a.t1=v.a,a.t2="".concat(w,"/products"),a.t3=e,a.t4="Bearer ",a.next=7,u.a.awrap(x());case 7:return a.t5=a.sent,a.t6=a.t4.concat.call(a.t4,a.t5),a.t7={Authorization:a.t6},a.t8={headers:a.t7},a.t9=a.t1.post.call(a.t1,a.t2,a.t3,a.t8),a.next=14,a.t0.awrap.call(a.t0,a.t9);case 14:return t=a.sent,a.abrupt("return",t.data);case 16:case"end":return a.stop()}}))}function S(e){var t;return u.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.t0=u.a,a.t1=v.a,a.t2="".concat(w,"/products/").concat(e),a.t3="Bearer ",a.next=6,u.a.awrap(x());case 6:return a.t4=a.sent,a.t5=a.t3.concat.call(a.t3,a.t4),a.t6={Authorization:a.t5},a.t7={headers:a.t6},a.t8=a.t1.delete.call(a.t1,a.t2,a.t7),a.next=13,a.t0.awrap.call(a.t0,a.t8);case 13:return t=a.sent,a.abrupt("return",t.data);case 15:case"end":return a.stop()}}))}var j=a(14),I=a.n(j),O=a(12);function T(e){var t=Object(n.useState)([]),a=Object(l.a)(t,2),c=a[0],o=a[1],s=Object(n.useState)(!0),p=Object(l.a)(s,2),f=p[0],E=p[1],v=Object(n.useState)(),h=Object(l.a)(v,2),g=h[0],x=h[1];function w(){var e;return u.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.a.awrap(N());case 2:e=t.sent,o(e),E(!1);case 5:case"end":return t.stop()}}))}Object(n.useEffect)((function(){setTimeout((function(){w()}),500);var e=(new O.a).withUrl("".concat("https://slncibertecapi20200213080059.azurewebsites.net","/producthub")).build();e.on("actualizarLista",(function(e){w()})),e.start().catch((function(e){return console.error(e)})),x(e)}),[]);var k="Hay ".concat(c.length," de productos registrados");return f?r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement("img",{src:I.a})):r.a.createElement("div",null,r.a.createElement(m,{texto:"Lista de Productos"}),r.a.createElement(d,{texto:k}),r.a.createElement(i.a,{to:"/products/insert",className:"btn btn-primary btn-sm mb-3"},"Crear nuevo producto"),r.a.createElement(b,{data:c,onDeleteProducts:function(e){return u.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.a.awrap(S(e));case 2:if(!(t.sent>0)){t.next=7;break}if(!g){t.next=7;break}return t.next=7,u.a.awrap(g.send("modificarProducto",{}));case 7:case"end":return t.stop()}}))}}))}function D(){return r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Nombre"),r.a.createElement("th",null,"Descripci\xf3n")))}function z(e){return r.a.createElement("tr",null,r.a.createElement("td",null,e.categoria.categoryName),r.a.createElement("td",null,e.categoria.description))}function C(e){return r.a.createElement("table",{className:"table table-bordered"},r.a.createElement(D,null),r.a.createElement("tbody",null,e.data.map((function(e){return r.a.createElement(z,{key:e.categoryId,categoria:e})}))))}function P(){var e;return u.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.a.awrap(v.a.get("".concat("https://slncibertecapi20200213080059.azurewebsites.net","/categories"),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("cibertec-token"))}}));case 2:return e=t.sent,t.abrupt("return",e.data);case 4:case"end":return t.stop()}}))}function A(e){var t=Object(n.useState)([]),a=Object(l.a)(t,2),c=a[0],o=a[1],s=Object(n.useState)(!0),i=Object(l.a)(s,2),p=i[0],f=i[1];Object(n.useEffect)((function(){setTimeout((function(){!function(){var e;u.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.a.awrap(P());case 2:e=t.sent,o(e),f(!1);case 5:case"end":return t.stop()}}))}()}),500)}),[]);var b="Hay ".concat(c.length," de categor\xedas registrados");return p?r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement("img",{src:I.a})):r.a.createElement("div",null,r.a.createElement(m,{texto:"Lista de Categor\xedas"}),r.a.createElement(d,{texto:b}),r.a.createElement(C,{data:c}))}function B(e){var t=r.a.useState(),a=Object(l.a)(t,2),n=a[0],c=a[1];return r.a.useEffect((function(){e.productId&&function(e){var t;u.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,u.a.awrap(k(e));case 2:t=a.sent,c(t);case 4:case"end":return a.stop()}}))}(e.productId)}),[]),r.a.createElement("div",null,"Detalle del producto con ID ",e.productId,r.a.createElement("pre",null,JSON.stringify(n)))}function U(e){var t=r.a.useState(""),a=Object(l.a)(t,2),n=a[0],c=a[1],o=r.a.useState(),s=Object(l.a)(o,2),i=s[0],d=s[1];r.a.useEffect((function(){var e=(new O.a).withUrl("".concat("https://slncibertecapi20200213080059.azurewebsites.net","/producthub")).build();e.start().catch((function(e){return console.error(e)})),d(e)}),[]);var p=function(e){var t;return u.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,u.a.awrap(y(e));case 2:if(t=a.sent,!i){a.next=6;break}return a.next=6,u.a.awrap(i.send("modificarProducto",e));case 6:c(t);case 7:case"end":return a.stop()}}))};return r.a.createElement("div",null,r.a.createElement(m,{texto:"Insertar un Producto"}),r.a.createElement("form",{className:"mt-3",onSubmit:function(e){e.preventDefault();var t={};t.productName=e.target.productName.value,p(t)}},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"productName"},"Nombre"),r.a.createElement("input",{className:"form-control",type:"text",name:"productName",id:"productName",placeholder:"Ingresa el nombre del producto"})),r.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Guardar")),r.a.createElement("p",{className:"mt-3"},"Resultado de insertar: ",n))}var H=a(31);function J(e){var t=r.a.useState(),a=Object(l.a)(t,2),n=a[0],c=a[1],o=r.a.useState([]),s=Object(l.a)(o,2),u=s[0],i=s[1],m=r.a.useState(),d=Object(l.a)(m,2),p=d[0],f=d[1];r.a.useEffect((function(){var e=Object(H.a)(u);p&&(e.push(p),i(e))}),[p]),r.a.useEffect((function(){var e=(new O.a).withUrl("".concat("https://slncibertecapi20200213080059.azurewebsites.net","/chathub")).build();e.on("mensajeRecibido",(function(e,t){console.log("Se ha recibido el mensaje ".concat(e," del usuario ").concat(t)),f({username:t,message:e})})),e.start().catch((function(e){return console.error(e)})),c(e)}),[]);return r.a.createElement("div",null,r.a.createElement("h2",null,"Chat"),r.a.createElement("form",{onSubmit:function(e){e.preventDefault();var t=e.target.mensaje.value,a=e.target.nombreUsuario.value;n&&n.send("enviarMensaje",t,a).then((function(){return console.log("se envi\xf3 el mensaje")}))}},r.a.createElement("input",{type:"text",name:"nombreUsuario"}),r.a.createElement("input",{type:"text",name:"mensaje"}),r.a.createElement("button",null,"Enviar")),r.a.createElement("div",null,r.a.createElement("h2",null,"Mensajes"),r.a.createElement("ul",{id:"lista-mensajes"},u.map((function(e,t){return r.a.createElement("li",{key:t},r.a.createElement("b",null,e.username),": ",e.message)})))))}function L(e){return r.a.createElement("div",{className:"container-fluid shadow-sm p-3 mb-5 bg-white rounded mt-5",style:{maxWidth:480}},r.a.createElement("h2",{className:"mb-3"},"Iniciar Sesi\xf3n"),r.a.createElement("form",{onSubmit:function(t){t.preventDefault(),console.log("Se va a iniciar sesi\xf3n"),function(t,a){var n,r;u.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,u.a.awrap(h(t,a));case 2:n=c.sent,console.log("nuevo token",n.accessToken),n.accessToken&&(localStorage.setItem("cibertec-token",n.accessToken),localStorage.setItem("cibertec-refresh-token",n.refreshToken),r=(new Date).getTime()+1e3*n.expiresIn,localStorage.setItem("cibertec-token-expiration-ms",r.toString())),e.onAuthenticate();case 6:case"end":return c.stop()}}))}(t.target.username.value,t.target.password.value)}},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Usuario"),r.a.createElement("input",{type:"text",name:"username",className:"form-control"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Contrase\xf1a"),r.a.createElement("input",{type:"password",name:"password",className:"form-control"})),r.a.createElement("div",null,r.a.createElement("button",{className:"btn btn-primary"},"Iniciar"))))}function F(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("nav",{className:"navbar navbar-dark fixed-top bg-dark flex-md-nowrap p-0 shadow"},r.a.createElement("a",{className:"navbar-brand col-sm-3 col-md-2 mr-0",href:"#"},"Company name"),r.a.createElement("input",{className:"form-control form-control-dark w-100",type:"text",placeholder:"Search"}),r.a.createElement("ul",{className:"navbar-nav px-3"},r.a.createElement("li",{className:"nav-item text-nowrap"},r.a.createElement("a",{className:"nav-link",href:"#",onClick:function(){localStorage.clear(),e.onSignOut()}},"Cerrar Sesi\xf3n")))),r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row"},r.a.createElement("nav",{className:"col-md-2 d-none d-md-block bg-light sidebar"},r.a.createElement("div",{className:"sidebar-sticky"},r.a.createElement("ul",{className:"nav flex-column"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(i.a,{className:"nav-link",to:"/products"},"Productos")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(i.a,{className:"nav-link",to:"/categories"},"Categor\xedas")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(i.a,{className:"nav-link",to:"/chat"},"Chat"))))),r.a.createElement("main",{role:"main",className:"col-md-9 ml-sm-auto col-lg-10 px-4"},r.a.createElement(i.b,null,r.a.createElement(T,{path:"/products"}),r.a.createElement(A,{path:"/categories"}),r.a.createElement(B,{path:"/products/:productId"}),r.a.createElement(U,{path:"/products/insert"}),r.a.createElement(J,{path:"/chat"}))))))}o.a.render(r.a.createElement((function(){var e=r.a.useState(!1),t=Object(l.a)(e,2),a=t[0],n=t[1];return r.a.useEffect((function(){localStorage.getItem("cibertec-token")&&n(!0)}),[]),a?r.a.createElement(F,{onSignOut:function(){n(!1)}}):r.a.createElement(L,{onAuthenticate:function(){n(!0)}})}),null),document.getElementById("root"));r.a.createElement("h1",null,"Hola mundo"),r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Columna1"))),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,"Valor 1")),r.a.createElement("tr",null,r.a.createElement("td",null,"Valor 2"))))}},[[32,1,2]]]);
//# sourceMappingURL=main.e31318c1.chunk.js.map